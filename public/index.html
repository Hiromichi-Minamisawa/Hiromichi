<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>クイズ参加画面</title>
</head>
<body>
  <h1>クイズ参加画面</h1>
  <div id="question">問題を待っています...</div>
  <input type="text" id="answer" placeholder="答えを入力" />
  <button onclick="sendAnswer()">送信</button>

  <script>
    const ws = new WebSocket(`wss://${location.host}/ws`);
    let currentQuestionTime = null;

    ws.onmessage = (event) => {
      const data = JSON.parse(event.data);
      if (data.type === "question") {
        document.getElementById("question").textContent = data.question;
        currentQuestionTime = Date.now();
      }
    };

    function sendAnswer() {
      const answer = document.getElementById("answer").value;
      const time = Date.now() - currentQuestionTime;
      const user = prompt("あなたの名前を入力してください");

      ws.send(JSON.stringify({ type: "answer", user, answer, time }));
    }
  </script>
</body>
</html>

