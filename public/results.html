<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>結果表示</title>
</head>
<body>
  <h2>解答結果</h2>
  <button onclick="loadResults()">結果を表示</button>
  <ul id="result-list"></ul>

  <script>
    async function loadResults() {
      const res = await fetch("/results");
      const data = await res.json();

      const list = document.getElementById("result-list");
      list.innerHTML = "";

      data.sort((a, b) => {
        if (a.correct === b.correct) {
          return a.timestamp - b.timestamp;
        }
        return b.correct - a.correct;
      });

      data.forEach(entry => {
        const li = document.createElement("li");
        li.textContent = `${entry.username} さん - 解答: ${entry.answer} - ${entry.correct ? "✅" : "❌"}`;
        list.appendChild(li);
      });
    }
  </script>
</body>
</html>
